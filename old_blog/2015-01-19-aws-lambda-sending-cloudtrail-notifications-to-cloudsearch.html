<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>AWS Lambda - Sending CloudTrail notifications to CloudSearch | Farid Zakaria’s Blog</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="AWS Lambda - Sending CloudTrail notifications to CloudSearch" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Lambda Amazon has just recently announced AWS Lambda, which is a pretty cool new service that runs your code in response to events. The service manages all the compute resources for you and is a nice hands-off approach to running things in the cloud (How much easier can it get!). At the moment there are only a few event sources that are supported by AWS Lambda however one of them are S3 Put notifications (creation/update of new keys/objects). CloudTrail &amp; Inspiration Recently at work I wanted more insight into some of the API calls that were made on our AWS accounts (occasionally mysterious actions have occured and finding the CloudTrail could prove fruitful). I&#39;ve recently written on setting up an EMR cluster connected to your CloudTrail S3 bucket to perform easy queries against your dataset however I find that too much power in most cases and thought there should be a simpler way. I had come across this blog post which outlines sending CloudTrail events to CloudSearch with the help of SQS, &amp; SNS. Now that AWS Lambda exists can it be simpler! You bet! I&#39;ve created the following gist which you can upload to AWS Lambda to start sending your S3 CloudTrail notifications to CloudSearch In order to utilize the script, make sure you&#39;ve created a CloudSearch domain and added the index fields in the MAPPINGS variable (you can use the helpful script in the linked blog post here)." />
<meta property="og:description" content="Lambda Amazon has just recently announced AWS Lambda, which is a pretty cool new service that runs your code in response to events. The service manages all the compute resources for you and is a nice hands-off approach to running things in the cloud (How much easier can it get!). At the moment there are only a few event sources that are supported by AWS Lambda however one of them are S3 Put notifications (creation/update of new keys/objects). CloudTrail &amp; Inspiration Recently at work I wanted more insight into some of the API calls that were made on our AWS accounts (occasionally mysterious actions have occured and finding the CloudTrail could prove fruitful). I&#39;ve recently written on setting up an EMR cluster connected to your CloudTrail S3 bucket to perform easy queries against your dataset however I find that too much power in most cases and thought there should be a simpler way. I had come across this blog post which outlines sending CloudTrail events to CloudSearch with the help of SQS, &amp; SNS. Now that AWS Lambda exists can it be simpler! You bet! I&#39;ve created the following gist which you can upload to AWS Lambda to start sending your S3 CloudTrail notifications to CloudSearch In order to utilize the script, make sure you&#39;ve created a CloudSearch domain and added the index fields in the MAPPINGS variable (you can use the helpful script in the linked blog post here)." />
<link rel="canonical" href="https://fzakaria.com/old_blog/2015-01-19-aws-lambda-sending-cloudtrail-notifications-to-cloudsearch.html" />
<meta property="og:url" content="https://fzakaria.com/old_blog/2015-01-19-aws-lambda-sending-cloudtrail-notifications-to-cloudsearch.html" />
<meta property="og:site_name" content="Farid Zakaria’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-01-19T19:47:11-08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="AWS Lambda - Sending CloudTrail notifications to CloudSearch" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2015-01-19T19:47:11-08:00","datePublished":"2015-01-19T19:47:11-08:00","description":"Lambda Amazon has just recently announced AWS Lambda, which is a pretty cool new service that runs your code in response to events. The service manages all the compute resources for you and is a nice hands-off approach to running things in the cloud (How much easier can it get!). At the moment there are only a few event sources that are supported by AWS Lambda however one of them are S3 Put notifications (creation/update of new keys/objects). CloudTrail &amp; Inspiration Recently at work I wanted more insight into some of the API calls that were made on our AWS accounts (occasionally mysterious actions have occured and finding the CloudTrail could prove fruitful). I&#39;ve recently written on setting up an EMR cluster connected to your CloudTrail S3 bucket to perform easy queries against your dataset however I find that too much power in most cases and thought there should be a simpler way. I had come across this blog post which outlines sending CloudTrail events to CloudSearch with the help of SQS, &amp; SNS. Now that AWS Lambda exists can it be simpler! You bet! I&#39;ve created the following gist which you can upload to AWS Lambda to start sending your S3 CloudTrail notifications to CloudSearch In order to utilize the script, make sure you&#39;ve created a CloudSearch domain and added the index fields in the MAPPINGS variable (you can use the helpful script in the linked blog post here).","headline":"AWS Lambda - Sending CloudTrail notifications to CloudSearch","mainEntityOfPage":{"@type":"WebPage","@id":"https://fzakaria.com/old_blog/2015-01-19-aws-lambda-sending-cloudtrail-notifications-to-cloudsearch.html"},"url":"https://fzakaria.com/old_blog/2015-01-19-aws-lambda-sending-cloudtrail-notifications-to-cloudsearch.html"}</script>
<!-- End Jekyll SEO tag -->

        <link type="application/atom+xml" rel="alternate" href="https://fzakaria.com/feed.xml" title="Farid Zakaria&apos;s Blog" />
        <link rel="stylesheet" type="text/css" href="/assets/css/base.css">
        <link rel="icon" type="image/x-icon" href="/assets/images/avatar.ico">
        <link rel="alternate" type="application/atom+xml" title="Farid Zakaria's Blog" href="/feed.xml">

        <link ref="">

        
        
        <link href="/assets/css/highlightjs-default-theme.css" rel="stylesheet" />
        

        
            <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-35360900-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-35360900-1');
</script>

        

    </head>
    <body>
        
        <script src="/assets/js/highlight.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        

        <div class="container">
            <h1 class="page-title">
    <a class="rss pull-right" href="/feed.xml"><i class="fa fa-rss"></i></a>
    AWS Lambda - Sending CloudTrail notifications to CloudSearch
</h1>

<div class="content">
    
    <p class="date">
        Published 2015-01-19
        on <a href="/">Farid Zakaria's Blog</a>
        <span class="hidden-xs">
          &mdash;
          <a href="/old_blog/2015-01-19-aws-lambda-sending-cloudtrail-notifications-to-cloudsearch.html">
            Permalink
          </a>
        </span>
    </p>
    
    <article>
      <h2> Lambda </h2>
<p>
Amazon has just recently announced <a href="http://aws.amazon.com/lambda/">AWS Lambda</a>, which is a pretty cool new service that runs your code in response to events. The service manages all the compute resources for you and is a nice hands-off approach to running things in the cloud (How much easier can it get!). At the moment there are only a few event sources that are supported by AWS Lambda however one of them are S3 Put notifications (creation/update of new keys/objects).</p>
<h2> CloudTrail & Inspiration </h2>
<p> Recently at work I wanted more insight into some of the API calls that were made on our AWS accounts (occasionally mysterious actions have occured and finding the CloudTrail could prove fruitful). I've recently written on setting up an EMR cluster connected to your CloudTrail S3 bucket to perform easy queries against your dataset however I find that <em>too much power</em> in most cases and thought there should be a simpler way.</p>
<p>
I had come across <a href="https://medium.com/aws-activate-startup-blog/searching-cloudtrail-logs-easily-with-amazon-cloudsearch-2d716e23efee">this blog post</a> which outlines sending CloudTrail events to CloudSearch with the help of SQS, & SNS. Now that AWS Lambda exists can it be simpler!<br />
<strong>You bet! </strong></p>
<p>
I've created the following <a href="https://gist.github.com/fzakaria/4f93a8dbf483695fb7d5">gist</a> which you can upload to AWS Lambda to start sending your S3 CloudTrail notifications to CloudSearch</p>
<p><script src="https://gist.github.com/fzakaria/4f93a8dbf483695fb7d5.js"></script></p>
<p>In order to utilize the script, make sure you've created a CloudSearch domain and added the index fields in the MAPPINGS variable (you can use the helpful script in the linked blog post here). </p>


<hr />
    </article>
</div>

<div class="sidebar">
    <hr class="visible-xs" />
    <img class="avatar" src="/assets/images/avatar-164.png" alt="A photo of my dog Moose" title="My dog Moose"/>
    <p>I'm a software engineer, father and wishful amateur surfer. If you've come seeking my political views; you've found the wrong <a href="https://fareedzakaria.com/">Fareed</a>.</p>
    <div class="external-links">
      <p>
        <span class="context">linkedin</span>
        <a href="https://www.linkedin.com/in/fmzakari/">fmzakari</a>
      </p>
      <p>
        <span class="context">github</span>
        <a href="https://github.com/fzakaria">fzakaria</a>
      </p>
      <p>
        <span class="context">email</span>
        <a href="mailto:farid.m.zakaria@gmail.com">farid.m.zakaria@gmail.com</a>
      </p>
      <p>
        <span class="context">pgp</span>
        <a href="/publickey.txt">D1B232E7</a>
      </p>
      <p>
        <a href="/archive">Archive</a>
      </p>
      <p>
        <a href="/old_blog/">Historic WordPress Blog</a>
      </p>
      <!--
      <p>
        Web friendly version of my <a href="/resume/index.html">resume</a>.
      </p>
    </div>
    <h3>Projects</h3>
    <p>
      <a href="/projects/">Click here</a> for some personal
      projects I've worked on.
    </p>
    <h3>Old Blog</h3>
    <p>
      <a href="/old_blog/">Click here</a> for the archive
      of my old blog posts from Wordpress.
    </p>
    -->
    
    <h3>Recent Posts</h3>
    
    <div class="post-stub">
      2025-02-02<br />
      <a href="/2025/02/02/nix-string-interpolation-of-directories-gone-awry.html">Nix: string interpolation of directories gone awry</a>
    </div>
    
    <div class="post-stub">
      2025-01-28<br />
      <a href="/2025/01/28/bazel-build-event-protocol-viewer.html">Bazel: Build Event Protocol Viewer</a>
    </div>
    
    <div class="post-stub">
      2025-01-12<br />
      <a href="/2025/01/12/bazel-knowledge-be-mindful-of-build-without-the-bytes.html">Bazel Knowledge: Be mindful of Build Without the Bytes (bwob)</a>
    </div>
    
    
    <h3>License</h3>
    <p style="font-size: 10pt">
    The content for this site is
    <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>.
    The <a href="https://github.com/SirCmpwn/ddjekyll">inspiration for the theme</a> for this site is
    © Drew Devault.
    </p>
    <div class="spacer" style="margin-top: 30px;"></div>
    
    <p><a href="https://github.com/fzakaria/fzakaria.com/edit/master/_old_blog/2015-01-19-aws-lambda-sending-cloudtrail-notifications-to-cloudsearch.html">
      Improve this page @ 417ff2d
    </a></p>

</div>
        </div>
    </body>
</html>
